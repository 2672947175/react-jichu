<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .app {
            color: aqua;
            background: palevioletred;
        }

        .aps {
            color: peru;
            background: palegreen;
        }

        .aa {
            font-size: 20px;
        }
        .boxs{
            width: 200px;
            line-height: 100px;
            background: orange;
            text-align: center;
        }
    </style>
</head>

<body>
    <!-- 1.åˆ›å»ºDom å…ƒç´  -->
    <div id="App"></div>

    <script>
        // 2.åˆ›å»ºå…¬å…±çš„ç»„ä»¶
        class Component {
            constructor() {
                this.elBtn = ""
            }
            // 2.1 åˆ›å»ºDOMå®¹å™¨
            rendreDomFremString(string) {
                let div = document.createElement('div')
                div.innerHTML = string
                return div
            }
            // 2.2 ç§æœ‰æ–¹æ³•ç”ŸæˆDom å…ƒç´ ï¼Œå¹¶ä¸”ç»‘å®šäº‹ä»¶
            _rendre() {
                // ç”ŸæˆDom å…ƒç´ 
                this.elBtn = this.rendreDomFremString(this.rendre())
                // ç»‘å®šäº‹ä»¶
                this.elBtn.addEventListener('click', this.onchangage.bind(this))
                return this.elBtn
            }
            // 2.3 è®¾ç½®çŠ¶æ€è¿›è¡ŒDomæ”¹å˜
            setState(newData = {}) {
                this.data = newData
                var oldEl = this.elBtn
                var newEl = this._rendre()
                this.changeRender(newEl, oldEl)

            }
            // 2.4 ä¿®æ”¹Domå…ƒç´ 
            onchangage() {
                this.setState({
                    isLike: !this.data.isLike
                })
            }
        }

        // 3. ä½¿ç”¨class åŒ…è£…DOM å…ƒç´ 
        class FDomBtn extends Component {
            constructor(props={}) {
                super(props)
                this.props = props
                this.data = {
                    isLike: false
                }
                
            }
            rendre() {
                console.log(this)
                return `
                    <button class="${this.data.isLike ? 'aps' : 'app'} aa">
                        <span>${this.data.isLike ? 'å–æ¶ˆç‚¹èµ' : 'ç‚¹èµ'}</span>
                        <span>ğŸ‘</span>
                    </button>`
            }
        }
        class BoxDOM extends Component {
            constructor(props={}) {
                super(props)
                this.props = props
                this.data = {
                    isLike: false
                }
                
            }
            rendre() {
               console.log(this)
                return `
                    <div class="boxs">
                        shahah
                    </div>
                    `
            }
        }
        const mount = (app, component) => {
            app.appendChild(component._rendre())
            component.changeRender = (newEl, oldEl) => {
                app.insertBefore(newEl, oldEl)
                app.removeChild(oldEl)
            }
        }


        mount(App, new FDomBtn())
        mount(App,new BoxDOM())
    </script>
</body>

</html>



<!-- 
    super æœ‰ä¸¤ç§æ–¹æ³• 1.å‡½æ•° 2.å¯¹è±¡ ä¸€èˆ¬ä½¿ç”¨å‡½æ•°

 -->

 <!-- ps:80 -->