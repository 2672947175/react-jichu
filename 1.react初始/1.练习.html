<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
      
    </style>
</head>
<body>
<!-- 1.åˆ›å»ºDOM å…ƒç´  -->
<div id="App"></div>

<script>
    // 2.åˆ›å»ºå…¬å…±æ¨¡å—
    class component {
        // 2.1 åˆå§‹åŒ–
        constructor(){
            this.oElbtn = ''
        }
        // 2.2 åˆ›å»ºå…ƒç´ 
        renderDom(string){
            var div = document.createElement('div')
            div.innerHTML=string
            return div
        }
        // 2.3 ä¿®æ”¹Dom å…ƒç´ 
        onChangage(){
            this.setState({
                isLike:!this.data.isLike
            })
        }
        // 2.4 è®¾ç½®çŠ¶æ€æ”¹å˜
        setState(newState={}){
            this.data = newState
            // å­˜å‚¨æ—§å€¼
            var oldEl = this.oElbtn;
            // ç”Ÿæˆæ–°çš„
            var newEl = this._render()
            this.changeRender(newEl,oldEl)
        }
        // è®¾ç½®ç§æœ‰å±æ€§
        _render(reda){
            this.oElbtn = this.renderDom(this.render())
             // ç‚¹å‡»äº‹ä»¶
            this.oElbtn.addEventListener('click',this.onChangage.bind(this))
            return this.oElbtn
        }

    }
    // 2.ä½¿ç”¨classç±» åŒ…è£… DOM å…ƒç´ 
    class  FDoBtn extends component {
        // åˆå§‹åŒ–æ•°æ®
        constructor(props={}){
            super(props)
            this.props = props
            this.data={
                isLike:false
            }
            this.DITC = {
                DZ:'ç‚¹èµ',
                QXZ:'å–æ¶ˆç‚¹èµ'
            }
        }
        // 2.1æŠŠåˆ›å»ºå¥½çš„å…ƒç´ è¿”å›
        render(){
            return `<button class="link-btn" style="${this.data.isLike?this.props.style1:this.props.style2}">
                    <span class="link-text">${this.data.isLike?this.DITC.QXZ:this.DITC.DZ}</span>
                    <span>ğŸ‘</span>
                </button>`
        }
    }
 
   const mount=(Component, Root)=>{
        // ç¬¬ä¸€æ¬¡åœ¨é¡µé¢ä¸­è¿½åŠ 
        Root.appendChild(Component._render())
        // å‡ºç°ä¿®æ”¹åä»æ–°åŠ è½½è¿™ä¸ªæ¨¡å—
        Component.changeRender=(newEl,oldEl)=>{
            // insertBefore ç¬¬ä¸€ä¸ªæ˜¯æ–°å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯æ—§å€¼
            Root.insertBefore(newEl,oldEl)
            // åˆ é™¤æ—§å€¼
            Root.removeChild(oldEl)
        }
   }
   mount(new FDoBtn({
       style1:`color:red;background: palegreen;`,
       style2:`
       color:pink;
       background: blue;
       font-size:20px;
       `

   }),document.querySelector('#App'))


</script>

</body>
</html>